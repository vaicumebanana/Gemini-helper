<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>GeraÃ§Ã£o com Gemini & Veo</title>
</head>
<body>
  <h1>ğŸ”® GeraÃ§Ã£o com Gemini API (Texto, Imagem, VÃ­deo)</h1>

  <label>Prompt:</label><br>
  <textarea id="prompt" rows="3" cols="60" placeholder="Descreva o que deseja gerar..."></textarea><br><br>

  <fieldset style="width: fit-content;">
    <legend><b>ğŸ¬ ConfiguraÃ§Ãµes de VÃ­deo</b></legend>
    <label>Modelo:</label>
    <select id="modelo-video">
      <option value="veo-2.0-generate-001">Veo 2.0</option>
      <option value="veo-3.0-generate-preview">Veo 3.0 Preview</option>
    </select><br>

    <label>ResoluÃ§Ã£o:</label>
    <select id="resolucao">
      <option value="720p">720p</option>
      <option value="1080p">1080p</option>
    </select><br>

    <label>DuraÃ§Ã£o (segundos):</label>
    <input type="number" id="duracao" value="6" min="1" max="16"><br>

    <label>Aspect Ratio:</label>
    <select id="aspect-ratio">
      <option value="16:9">16:9</option>
      <option value="1:1">1:1</option>
      <option value="9:16">9:16 (vertical)</option>
    </select><br>

    <label>Ãudio:</label>
    <input type="checkbox" id="audio"><br>

    <label>Negative Prompt:</label><br>
    <input type="text" id="negative-prompt" style="width: 300px;" placeholder="Evite..."><br>
  </fieldset><br>

  <button onclick="gerarTexto()">âœ¨ Gerar Texto</button>
  <button onclick="gerarImagem()">ğŸ–¼ï¸ Gerar Imagem</button>
  <button onclick="gerarVideo()">ğŸï¸ Gerar VÃ­deo</button>

  <h2>ğŸ” Resultado:</h2>
  <pre id="out-texto"></pre>
  <img id="out-imagem" style="max-width: 400px;"><br>
  <video id="out-video" controls style="max-width: 400px;"></video>

  <script>
    const API_KEY = 'SUA_API_KEY';

    async function fetchGemini(path, body) {
      const resp = await fetch('https://api.gemini.google.com/v1/' + path, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + API_KEY
        },
        body: JSON.stringify(body)
      });
      if (!resp.ok) throw new Error(await resp.text());
      return resp.json();
    }

    async function gerarTexto() {
      const prompt = document.getElementById('prompt').value;
      const r = await fetchGemini('text/generate', {
        model: 'gemini-2.0-flash',
        prompt: prompt
      });
      document.getElementById('out-texto').innerText = r.text;
    }

    async function gerarImagem() {
      const prompt = document.getElementById('prompt').value;
      const r = await fetchGemini('image/generate', {
        model: 'gemini-2.0-flash',
        prompt: prompt,
        n: 1,
        size: '1024x1024'
      });
      document.getElementById('out-imagem').src = r.images[0].url;
    }

    async function gerarVideo() {
      const prompt = document.getElementById('prompt').value;
      const modelo = document.getElementById('modelo-video').value;
      const resolucao = document.getElementById('resolucao').value;
      const duracao = parseInt(document.getElementById('duracao').value);
      const aspect = document.getElementById('aspect-ratio').value;
      const audio = document.getElementById('audio').checked;
      const neg = document.getElementById('negative-prompt').value;

      const body = {
        model: modelo,
        prompt: prompt,
        durationSeconds: duracao,
        aspectRatio: aspect,
        resolution: resolucao,
        generateAudio: audio,
        negativePrompt: neg,
        enhancePrompt: true,
        personGeneration: 'allow_all'
      };

      const op = await fetchGemini('video/generate', body);
      const name = op.name;

      let status = await fetchGemini('operations/' + encodeURIComponent(name), {});
      while (!status.done) {
        await new Promise(r => setTimeout(r, 10000));
        status = await fetchGemini('operations/' + encodeURIComponent(name), {});
      }
      const url = status.response.generatedVideos[0].video;
      document.getElementById('out-video').src = url;
    }
  </script>
</body>
</html>
